<div fxLayout="row">
  <div fxFlex.lg="1 1 calc(1em)"></div>
  <div fxFlex="8 8 calc(8em)" class="card">
    <div class="card-header card-header-primary">
      <h4 class="card-title">用户管理</h4>
    </div>
    <div class="card-body" fxLayout="column" fxLayoutAlign="start stretch">
      <div fxLayout="row" fxLayoutAlign="center center">
        <mat-spinner *ngIf="isLoading" color="primary" mode="indeterminate">
        </mat-spinner>
      </div>

      <div class="detail-section" fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="10px" *ngIf="!isLoading">
        <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between center"
          fxLayoutGap="15px" fxLayoutAlign.xs="start start">
          <span class="item-title" fxFlex="1 0 20%" fxFlexAlign.xs="start">用户名</span>
          <div class="item-content" fxFlex="1 0 78%" fxFlexAlign.xs="stretch">
            <form fxLayout="row" fxLayoutAlign="space-between center" fxLayout.xs="column"
              fxLayoutAlign.xs="start stretch" (ngSubmit)="retrieveUserPermissions()">
              <mat-form-field>
                <input matInput type="text" name="username" [(ngModel)]="username" #usernameModel="ngModel" required>
                <mat-error *ngIf="usernameModel.hasError('required')">请输入用户名。</mat-error>
              </mat-form-field>
              <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="5px">
                <button mat-raised-button type="submit" color="primary" [disabled]="usernameModel.invalid">检索</button>
              </div>
            </form>
          </div>
          <div fxFlex="1 0 2%"></div>
        </div>

        <p class="text-danger" *ngIf="errorMessage">{{ errorMessage }}</p>

        <mat-divider></mat-divider>

        <ng-container *ngIf="user">
          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">姓名</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.first_name }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">性别</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.gender_str }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">年龄</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.age }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">学历</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.education_background }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>


          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">任教类型</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.teaching_type }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">专业技术职称</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.technical_title }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">任职状态</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.tenure_status }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">所属院系</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.department_str }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">所属行政单位</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.administrative_department_str }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">入职时间</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.onboard_time | date:'medium'}}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">邮箱</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.email }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">手机号</span>
            <div class="item-content" fxFlex="1 0 78%">
              {{ user.cell_phone_number }}
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>

          <div class="detail-item" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between start"
            fxLayoutGap="15px">
            <span class="item-title" fxFlex="1 0 20%">所属部门及身份</span>
            <div class="item-content" fxFlex="1 0 78%">
              <mat-chip-list>
                <mat-chip color="primary" *ngFor="let group of groups" selected>{{group.name}}</mat-chip>
              </mat-chip-list>
            </div>
            <div fxFlex="1 0 2%"></div>
          </div>
        </ng-container>

      </div>
    </div>
  </div>
  <div fxFlex.lg="1 1 calc(1em)"></div>
</div>
